---
title: GithubActionè‡ªåŠ¨åŒ–éƒ¨ç½²
date: 2021-12-08 19:20:51
permalink: /pages/0b37ee/
categories:
  - å°è®°
  - ä¸€äº›å®ç”¨å°æŠ€å·§
  - Github
tags:
  - 
---
## é—®é¢˜æ¥æº
åœ¨ä¹‹å‰,éƒ¨ç½²åšå®¢éœ€è¦èµ°è¿‡ä»¥ä¸‹å‡ æ­¥

1. ä»Git`git pull`æ‹‰å–æœ€æ–°çš„Version
2. æœ¬åœ°ç¼–è¾‘Markdownæ–‡ä»¶
3. åœ¨æœ¬åœ°å¯åŠ¨`yarn docs:dev`ç¡®ä¿èƒ½å¤ŸæˆåŠŸrunèµ·æ¥
4. å°†æºä»£ç æäº¤è‡³ä»“åº“çš„`main æˆ– master`åˆ†æ”¯ä»¥ç¡®ä¿å›¢é˜Ÿçš„ä»£ç ååŒ
5. å°†æ‰“åŒ…æ–‡ä»¶æäº¤è‡³ä»“åº“çš„`gh-pages`åˆ†æ”¯è¿›è¡Œéƒ¨ç½²

## é—®é¢˜åœ¨å“ª
:::note é—®é¢˜
```
æˆ‘å†™ä¸ªåšå®¢ä¸ºä»€ä¹ˆè¦é‚£ä¹ˆéº»çƒ¦,ç¼–è¾‘å·²ç»å¤Ÿç´¯äº†

ä½†æ˜¯æˆ‘è¿˜å¾—èŠ±ä¸€å †æ—¶é—´æ“ä½œ,ä¸€å¥—æµç¨‹èµ°ä¸‹æ¥å°±å¾—5åˆ†é’Ÿ

æˆ‘è¿˜æœ‰è¯¾è¦ä¸Š,æˆ‘ä½œä¸šè¿˜æ²¡å†™å‘¢,å†™åšå®¢é‚£ä¹ˆéº»çƒ¦,æˆ‘è¿˜æ˜¯ä¸å†™ç®—äº†
```
:::

## é—®é¢˜è§£å†³
:::tip è§£å†³
```
äº‹å®ä¸Š,é€šè¿‡ç¼–å†™YAMLå³å¯å®Œæˆç›¸åº”å·¥ä½œ

å½“æŠŠæºä»£ç Pushåˆ°mainåˆ†æ”¯ä¸Šæ—¶,YAMLä¼šè‡ªåŠ¨æ‰§è¡Œå¯¹åº”å‘½ä»¤å°†æ‰“åŒ…æ–‡ä»¶éƒ¨ç½²è‡³gh-pagesåˆ†æ”¯ä¸‹~~~ å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²
```
:::

## å¯¹æ¯”é—®é¢˜è§£å†³ä¹‹å‰
å½“æŠŠè¿™ä¸ªè‡ªåŠ¨åŒ–éƒ¨ç½²è§£å†³ä¹‹å,å¯¹æ¯”ä¹‹å‰

1. ä»Git`git pull`æ‹‰å–æœ€æ–°çš„Version
2. æœ¬åœ°ç¼–è¾‘Markdownæ–‡ä»¶
3. åœ¨æœ¬åœ°å¯åŠ¨`yarn docs:dev`ç¡®ä¿èƒ½å¤ŸæˆåŠŸrunèµ·æ¥
4. å°†æºä»£ç æäº¤è‡³ä»“åº“çš„`main æˆ– master`åˆ†æ”¯ä»¥ç¡®ä¿å›¢é˜Ÿçš„ä»£ç ååŒ,åŒæ—¶å°†ç¬¬5æ­¥èå…¥è¿›æ¥,å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²

## GithubActionså®ç°æ–¹æ³•

1. åœ¨é¡¹ç›®çš„æ ¹ç›®å½•æ–°å»º`.github/workflows`æ–‡ä»¶å¤¹.
2. åˆ›å»ºYAMLé…ç½®æ–‡ä»¶,ä¾‹å¦‚`AsheOne18.yml`,å–åéšæ„
3. ç¼–å†™é…ç½®æ–‡ä»¶
```yml
name: GitHub Actions Build and Deploy # åå­—éšä¾¿
on:
  push:
    branches:
      - main # å½“ä»£ç Pushè‡³Mainåˆ†æ”¯

jobs: # ä»»åŠ¡
  build-and-deploy: # æ„å»º å’Œ éƒ¨ç½² 
    runs-on: ubuntu-latest # è¿è¡Œç¯å¢ƒ
    steps: # æ­¥éª¤
      - name: Checkout ğŸ›ï¸ #åå­—,éšä¾¿å–
        uses: actions/checkout@v2.3.1 
        with:
          persist-credentials: false

        # æ„å»ºé™æ€æ–‡ä»¶
      - name: Install and Build ğŸ”§ #åå­—,éšä¾¿å–
        run: |
            npm install yarn 
            yarn
            yarn docs:build

        # å°†é¡¹ç›®æ„å»ºè‡³æŒ‡å®šåˆ†æ”¯
      - name: Deploy ğŸš€ # åå­—,éšä¾¿å–
        uses: JamesIves/github-pages-deploy-action@3.7.1
        with:
          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }} # Githubä¼šè‡ªåŠ¨æä¾›
          BRANCH: gh-pages # éƒ¨ç½²æŒ‡å®šåˆ†æ”¯
          FOLDER: docs/.vuepress/dist # é™æ€æ–‡ä»¶ç›®å½•
          CLEAN: true
```

å…¶ä¸­,`secrets.ACCESS_TOKEN`è·å–çš„æ­¥éª¤
1. Github ä¸ªäºº`Settings`
2. å·¦è¾¹çš„ `Developer settings`
3. å·¦è¾¹çš„ `Personal acccess tokens`
4. å³ä¸Šè§’ `Generate new token`
5. å‹¾é€‰ `Repo` æƒé™,åå­—éšä¾¿


ç”Ÿæˆçš„tokenåªèƒ½è¢«ä½ çœ‹åˆ°ä¸€æ¬¡,æ‰€ä»¥ä½ éœ€è¦å¤åˆ¶å®ƒ

1. è¿›å…¥`é¡¹ç›®ä»“åº“`
2. æ‰“å¼€`Setting`
3. æ‰“å¼€`Secrets`
4. ç‚¹å‡»`New secret`
5. `Name`éšä¾¿å–,`Value`å†™åˆšåˆšå¤åˆ¶çš„`token`

è¿™æ—¶å€™ä¸€åˆ‡éƒ½å®Œæˆäº†,å½“ç„¶,é…ç½®è¿œè¿œä¸æ­¢è¿™æ ·,æ›´è¯¦ç»†çš„åœ¨[å®˜æ–¹æ–‡æ¡£](https://docs.github.com/cn/actions)